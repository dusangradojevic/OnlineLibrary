<app-header></app-header>

<div class="content">
  <div class="row">
    <div class="col-12">
      <h3>Prijava</h3>
    </div>
  </div>

  <form>
    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b> Korisnicko ime: </b></div>
      <div class="col-12 col-md-6">
        <input type="text" name="usernameLog" [(ngModel)]="usernameLogin" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Lozinka:</b></div>
      <div class="col-12 col-md-6">
        <input type="password" name="passLog" [(ngModel)]="passwordLogin" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-4 offset-md-3">
        <input
          type="button"
          class="btn btn-light"
          value="Prijavi se"
          (click)="login()"
        />
      </div>
    </div>
  </form>

  <div class="row">
    <div class="col-12">
      <span class="error">{{ msgLogin }}</span>
    </div>
  </div>

  <hr />

  <div class="row">
    <div class="col-12"><h3>Registracija</h3></div>
  </div>

  <form>
    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Ime*:</b></div>
      <div class="col-12 col-md-4">
        <input type="text" name="firstname" [(ngModel)]="userReg.firstname" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Prezime*:</b></div>
      <div class="col-12 col-md-4">
        <input type="text" name="lastname" [(ngModel)]="userReg.lastname" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Korisnicko ime*:</b></div>
      <div class="col-12 col-md-4">
        <input type="text" name="usernameReg" [(ngModel)]="userReg.username" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Lozinka*:</b></div>
      <div class="col-12 col-md-4">
        <input type="password" name="passReg" [(ngModel)]="userReg.password" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Potvrdite lozinku*:</b></div>
      <div class="col-12 col-md-4">
        <input
          type="password"
          name="passRegConfirm"
          [(ngModel)]="confirmPassword"
        />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Telefon*:</b></div>
      <div class="col-12 col-md-4">
        <input type="text" name="phone" [(ngModel)]="userReg.phone" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Email*:</b></div>
      <div class="col-12 col-md-4">
        <input type="email" name="email" [(ngModel)]="userReg.email" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Adresa*:</b></div>
      <div class="col-12 col-md-4">
        <input type="email" name="email" [(ngModel)]="userReg.address" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-2 offset-md-3"><b>Slika:</b></div>
      <div class="col-12 col-md-4">
        <input type="file" accept="image" (change)="selectImage($event)" />
      </div>
    </div>

    <div class="row">
      <div class="col-12 offset-md-3">
        <input
          type="button"
          class="btn btn-light"
          value="Registruj se"
          (click)="register()"
        />
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <span class="error">{{ msgRegister }}</span>
      </div>
    </div>
  </form>

  <hr />

  <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner" align="center">
      <div class="carousel-item active">
        <img
          class="d-block w-100 carousel-img"
          [src]="top3Pictures.get(top3Books[0].id)"
          alt="First slide"
        />
        <!-- <div class="carousel-caption d-none d-md-block">
          <h5 class="top3BooksText">{{top3Books[0].name}}</h5>
          <p class="top3BooksText">{{top3Books[0].authors.join(', ')}}</p>
        </div> -->
      </div>
      <div class="carousel-item">
        <img
          class="d-block w-100 carousel-img"
          [src]="top3Pictures.get(top3Books[1].id)"
          alt="Second slide"
        />
      </div>
      <div class="carousel-item">
        <img
          class="d-block w-100 carousel-img"
          [src]="top3Pictures.get(top3Books[2].id)"
          alt="Third slide"
        />
      </div>
    </div>

    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#carouselExampleControls"
      role="button"
      data-bs-slide="prev"
      (click)="prevText()"
    >
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#carouselExampleControls"
      role="button"
      data-bs-slide="next"
      (click)="nextText()"
    >
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
    </button>

    <div align="center">
      <h5>{{ currTop3Book.name }}</h5>
      <p>{{ currTop3Book.authors.join(", ") }}</p>
    </div>
  </div>

  <hr />

  <div class="row">
    <div class="col-12"><h3>Pretraga</h3></div>
  </div>

  <div class="row">
    <div class="col-12 col-md-2 offset-md-3"><b>Naziv:</b></div>
    <div class="col-12 col-md-4"><input type="text" [(ngModel)]="name" /></div>
  </div>

  <div class="row">
    <div class="col-12 col-md-2 offset-md-3"><b>Autor:</b></div>
    <div class="col-12 col-md-4">
      <input type="text" [(ngModel)]="author" />
    </div>
  </div>

  <div class="row" style="margin-bottom: 30px">
    <div class="col-12 offset-md-3">
      <button class="btn btn-light" (click)="startSearch()">Pretrazi</button>
    </div>
  </div>

  <div *ngFor="let book of allBooks">
    <div class="row">
      <div class="col-12 col-md-1 offset-md-2">
        <img [src]="pictures.get(book.id)" />
      </div>

      <div class="col-12 col-md-8 offset-md-1">
        <div class="row">
          <div class="col-12 col-md-3">Naziv:</div>
          <div class="col-12 col-md-6 ">
            {{ book.name }}
          </div>
        </div>

        <div class="row">
          <div class="col-12 col-md-3">Autori:</div>
          <div class="col-12 col-md-6">
            {{ book.authors.join(", ") }}
          </div>
        </div>

        <div class="row">
          <div class="col-12 col-md-3">Zanrovi:</div>
          <div class="col-12 col-md-6">
            {{ book.genre.join(", ") }}
          </div>
        </div>

        <div class="row">
          <div class="col-12 col-md-3">Broj primeraka:</div>
          <div class="col-12 col-md-6">
            {{ book.numberInStock }}
          </div>
        </div>
      </div>
    </div>

    <br>
  </div>

  <!-- <table class="table table-striped table-bordered table-hover">
      <tbody>
        <tr>
          <td colspan="2">
            <img [src]="pictures.get(book.id)" />
          </td>
        </tr>

        <tr>
          <td>Naziv:</td>
          <td>{{ book.name }}</td>
        </tr>

        <tr>
          <td>Autori:</td>
          <td>{{ book.authors.join(", ") }}</td>
        </tr>

        <tr>
          <td>Zanrovi:</td>
          <td>{{ book.genre.join(", ") }}</td>
        </tr>

        <tr>
          <td>Broj primeraka:</td>
          <td>{{ book.numberInStock }}</td>
        </tr>
      </tbody>
    </table> -->
</div>
